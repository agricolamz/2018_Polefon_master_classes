---
title: "Первый день"
author: "[Г. Мороз](mailto:agricolamz@gmail.com) <br> Presentation link:"
output_df: paged
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(message = FALSE, warning = FALSE, comment=NA, fig.width=8, fig.height=3.4, echo =FALSE)
library(tidyverse)
read_csv("/home/agricolamz/work/materials/2018_Abaza_expedition/sound/list.csv") %>% 
  filter(str_detect(word, "[сзцдт][ыа]$"),
         word != "ца",
         word != "цIда") ->
  word_list
```

# Данные

* 1 носитль абазинского языка произносил 
* односложные слова 
* с открытым слогом, 
* содержащие гласные **a** или **ə** 
* в контексте после **зубных** (**t**, **d**, **s**, **z**, **ts**, **dz**)
* 4 произнесения (3 повторения и carrier phrase)
```{r}
word_list %>% 
  mutate(vowel = if_else(str_detect(word, "ы"), "ы", "а")) %>% 
  count(vowel) %>% 
  rename(`гласный` = vowel, количество_слов = n)
```
* все данные записаны в июле 2018 г. в ходе экспедиции НИУ ВШЭ
```{r}
word_list %>% 
  arrange(word)
```

Данные доступны [здесь](https://github.com/agricolamz/2018_Polefon_master_classes/blob/master/data/day_1_sound.zip?raw=true).

## Исследовательские вопросы

1. Правда ли, что **a** в среднем длиннее **ə**?
2. Верно ли это для всех произнесений (первое, второе, третье, carrier phrase)?

# Praat

## Работа с файлами

```{r, fig.cap="1. Чтение файлов в Praat."}
knitr::include_graphics(rep("images/01.reading_files.gif"))
```

```{r, fig.cap="2. Полученные файлы можно соединить в один, сохраняя названия."}
knitr::include_graphics(rep("images/02.concatenate_files.gif"))
```

```{r, fig.cap="3. Полученный звук можно автоматически разделит по паузам."}
knitr::include_graphics(rep("images/03.annotate.gif"))
```

```{r, fig.cap="4. Полученные аннотации можно соединить."}
knitr::include_graphics(rep("images/04.merge_annotation.gif"))
```

На этом этапе, данные надо почистить и подкорректировать: нужно в полученной автоматически разметке удалить лишнюю разметку и добавить нехватающую. Этим НЕ НАДО заниматься на семинаре. Скачайте уже почищенные файлы: [звук](https://github.com/agricolamz/2018_Polefon_master_classes/blob/master/data/2018.07_D11_dentals.wav?raw=true) и [текстгрид](https://raw.githubusercontent.com/agricolamz/2018_Polefon_master_classes/master/data/2018.07_D11_dentals.TextGrid). Потом, используя команды из вкладки `Tier` можно поменять структуру разметки на ту, которая хороша для документации языка. Я считаю, что необходимы следующие слои:

* дополнительная разметка
* звуки
* номер произнесения
* слово
* перевод
* код спикера

Эта структура представлена на рисунке ниже:

```{r, fig.cap="5. Структура слоёв."}
knitr::include_graphics(rep("images/05.tier_structure.png"))
```

## Praat скрипты

Я предлогаю автоматически заполнить полученные файлы, используя следующие файлы:

* Praat  скрипт
* Файл со звуками (vowels.txt), файл с номерами произнесения (utterance.txt), файл со словами (abaza.txt), файл с переводом (trans.txt)

# Введение в R

## Переменные

## Датафрейм

## Считывание файлов в R

## Визуализация данных
